<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CppRT: /home/tyazid/workspace/cpprt-master/inc/cpprt.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CppRT
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_2home_2tyazid_2workspace_2cpprt-master_2inc_2cpprt_8h-example.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/tyazid/workspace/cpprt-master/inc/cpprt.h</div>  </div>
</div><!--header-->
<div class="contents">
<p><em><b>Here are some small examples about how to use "util" name space classes:</b></em> <br/>
 <br/>
 1- Use of macro <b>synchronized(M)</b> to create mutual exclusion lock block. </p>
<div class="fragment"><div class="line"> Mutex m;</div>
<div class="line"> cout &lt;&lt; <span class="stringliteral">&quot;entering exclusion lock block&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="keyword">synchronized</span> (m)</div>
<div class="line">{</div>
<div class="line"><span class="comment">// ... do some stuff ...</span></div>
<div class="line">}</div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;leaving exclusion lock block&quot;</span> &lt;&lt; endl;</div>
</div><!-- fragment --><p> <br/>
 2- <b>Thread</b> use with a Runnable instance . </p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyRun: <span class="keyword">public</span> Runnable</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"><span class="keyword">virtual</span> ~MyRun()</div>
<div class="line">{</div>
<div class="line"><span class="comment">//...</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> Run(<span class="keywordtype">void</span> *d)</div>
<div class="line">{</div>
<div class="line"><span class="comment">// ... do some stuff ...</span></div>
<div class="line">}</div>
<div class="line">} task;</div>
<div class="line">Thread t(&amp;task);</div>
<div class="line">t.Start(NULL);</div>
<div class="line">t.Join();</div>
</div><!-- fragment --><p> <br/>
 3- <b>Thread</b> waiting on <b>Mutex</b> within <b>synchronized</b> bloc.. </p>
<div class="fragment"><div class="line">Mutex m;</div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;entering exclusion lock block&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="keyword">synchronized</span>(m)</div>
<div class="line"> {</div>
<div class="line">m.Wait(1000);<span class="comment">// wait for 1 seconds Mutex could be notified by another thread during this time.</span></div>
<div class="line">}</div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;leaving exclusion lock block&quot;</span> &lt;&lt; endl;</div>
</div><!-- fragment --><p><br/>
 4- Use of <b>EventQueue</b> asynchronous event dispatching mechanism . </p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Event: <span class="keyword">public</span> EventObject&lt;string&gt;</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">Event(<span class="keywordtype">string</span>* src, <span class="keywordtype">int</span> type) :</div>
<div class="line">EventObject&lt;string&gt;(src), mtype(type)</div>
<div class="line">{}</div>
<div class="line"><span class="keywordtype">int</span> GetType()</div>
<div class="line">{</div>
<div class="line"><span class="keywordflow">return</span> mtype;</div>
<div class="line">}</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line"><span class="keywordtype">int</span> mtype;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"> <span class="keyword">class </span>Listener: <span class="keyword">public</span> EventListener&lt;Event&gt;</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"><span class="keyword">virtual</span> ~Listener()</div>
<div class="line">{}</div>
<div class="line"><span class="keywordtype">void</span> onEvent(Event* evt)</div>
<div class="line">{</div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot; Event occurs [type = &quot;</span> &lt;&lt; evt-&gt;GetType() &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>&lt;&lt; endl;</div>
<div class="line">}</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"> <span class="keyword">static</span> <span class="keywordtype">void</span> eq_test()</div>
<div class="line">{</div>
<div class="line"><a name="_a0"></a><a class="code" href="classutil_1_1EventQueue.html">util::EventQueue&lt;Event&gt;</a>* eq = <span class="keyword">new</span> <a class="code" href="classutil_1_1EventQueue.html">util::EventQueue&lt;Event&gt;</a>();</div>
<div class="line">eq-&gt;<a name="a1"></a><a class="code" href="classutil_1_1EventQueue.html#aa4e45a26e2b87d22662b882baf6f1a6e">AddQListener</a>(<span class="keyword">new</span> Listener);</div>
<div class="line"><span class="comment">//Post 5 events</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; i++)</div>
<div class="line">{</div>
<div class="line">eq-&gt;<a name="a2"></a><a class="code" href="classutil_1_1EventQueue.html#abdc2cd2e0cc9c46bac83b717c3e3700a">Post</a>(<span class="keyword">new</span> Event(<span class="keyword">new</span> <span class="keywordtype">string</span>(<span class="stringliteral">&quot; MY EVT&quot;</span>), i));</div>
<div class="line">}</div>
<div class="line">}</div>
</div><!-- fragment --><p><br/>
 5- Synchronizing a thread on a asynchronous event listening. <br/>
 </p>
<div class="fragment"><div class="line"><span class="keyword">class </span>OListener: <span class="keyword">public</span> EventListener&lt;OEvent&gt;</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">Mutex m;</div>
<div class="line"><span class="keywordtype">bool</span> coin;</div>
<div class="line">PListener() :coin(<span class="keyword">false</span>)</div>
<div class="line">{}</div>
<div class="line">~OListener()</div>
<div class="line">{}</div>
<div class="line"><span class="keywordtype">void</span> onEvent(OEvent* evt)</div>
<div class="line">{</div>
<div class="line"><span class="keyword">synchronized</span>(m)</div>
<div class="line">{</div>
<div class="line">coin = <span class="keyword">true</span>;<span class="comment">//set coin</span></div>
<div class="line">m.Notify();<span class="comment">//wakeup waiting thread.</span></div>
<div class="line">}</div>
<div class="line">}</div>
<div class="line">};</div>
<div class="line">AnyObservable o();</div>
<div class="line">OListener *l = <span class="keyword">new</span> OListener;</div>
<div class="line">o-&gt;AddListener(l);</div>
<div class="line">o-&gt;DoStuff();<span class="comment">//start asynchronous action</span></div>
<div class="line"><span class="keyword">synchronized</span>(l-&gt;m)</div>
<div class="line">{</div>
<div class="line"><span class="keywordflow">if</span> (!l-&gt;coin) <span class="comment">// check the coin</span></div>
<div class="line">l-&gt;m.Wait();<span class="comment">//waiting for asynchronous event.</span></div>
<div class="line">}</div>
</div><!-- fragment --><p><br/>
 -6 Use of <b>AttributeSet</b> : <br/>
 </p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MultiAttributeSet: <span class="keyword">public</span> <a name="_a3"></a><a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet</a>&lt;bool&gt;,<span class="keyword">public</span> <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet</a>&lt;int&gt;,<span class="keyword">public</span> <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet</a>&lt;double&gt;,<span class="keyword">public</span> <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet</a>&lt;std::string&gt;</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">MultiAttributeSet() : <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;bool&gt;</a>(), <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;int&gt;</a>(), <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;std::string&gt;</a>() { }</div>
<div class="line">MultiAttributeSet(<span class="keywordtype">bool</span> ro) : <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;bool&gt;</a>(ro), <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;int&gt;</a>(ro), <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;std::string&gt;</a>(ro) { }</div>
<div class="line">MultiAttributeSet(<span class="keyword">const</span> MultiAttributeSet&amp;other) : <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;bool&gt;</a>(other), <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;int&gt;</a>(other), <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;std::string&gt;</a>(other) { }</div>
<div class="line">ATTR_EXTENDS_M(<span class="keywordtype">double</span>)</div>
<div class="line">ATTR_EXTENDS_M(<span class="keywordtype">bool</span>)</div>
<div class="line">ATTR_EXTENDS_M(<span class="keywordtype">int</span>)</div>
<div class="line">ATTR_EXTENDS_M(std::string)</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a4"></a><a class="code" href="classutil_1_1AttributeSet.html#ada89124eaad4656ea4c2dbf712cf59ab">Empty</a>()</div>
<div class="line">{</div>
<div class="line"><span class="keywordtype">bool</span> e = <a class="code" href="classutil_1_1AttributeSet.html#ada89124eaad4656ea4c2dbf712cf59ab">util::AttributeSet&lt;bool&gt;::Empty</a>();</div>
<div class="line">e &amp;= <a class="code" href="classutil_1_1AttributeSet.html#ada89124eaad4656ea4c2dbf712cf59ab">util::AttributeSet&lt;double&gt;::Empty</a>();</div>
<div class="line">e &amp;= <a class="code" href="classutil_1_1AttributeSet.html#ada89124eaad4656ea4c2dbf712cf59ab">util::AttributeSet&lt;int&gt;::Empty</a>();</div>
<div class="line">e &amp;= <a class="code" href="classutil_1_1AttributeSet.html#ada89124eaad4656ea4c2dbf712cf59ab">util::AttributeSet&lt;std::string&gt;::Empty</a>();</div>
<div class="line"><span class="keywordflow">return</span> e;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a5"></a><a class="code" href="classutil_1_1AttributeSet.html#afb39034f7c1ad5ef8819e6247bbc347a">IsWriteable</a>() { <span class="keywordflow">return</span> <a class="code" href="classutil_1_1AttributeSet.html#afb39034f7c1ad5ef8819e6247bbc347a">util::AttributeSet&lt;bool&gt;::IsWriteable</a>(); }</div>
<div class="line"><span class="keywordtype">size_t</span> <a name="a6"></a><a class="code" href="classutil_1_1AttributeSet.html#a44c174b36a83e26dd3973c0202c984a0">Size</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"><span class="keywordtype">size_t</span> s = <a class="code" href="classutil_1_1AttributeSet.html#a44c174b36a83e26dd3973c0202c984a0">util::AttributeSet&lt;bool&gt;::Size</a>();</div>
<div class="line">s += <a class="code" href="classutil_1_1AttributeSet.html#a44c174b36a83e26dd3973c0202c984a0">util::AttributeSet&lt;int&gt;::Size</a>();</div>
<div class="line">s += <a class="code" href="classutil_1_1AttributeSet.html#a44c174b36a83e26dd3973c0202c984a0">util::AttributeSet&lt;double&gt;::Size</a>();</div>
<div class="line">s += <a class="code" href="classutil_1_1AttributeSet.html#a44c174b36a83e26dd3973c0202c984a0">util::AttributeSet&lt;std::string&gt;::Size</a>();</div>
<div class="line"><span class="keywordflow">return</span> s;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> <a name="a7"></a><a class="code" href="classutil_1_1AttributeSet.html#a43e038c3e7ac88d6b6f83e5f62edc1ba">Clear</a>()<span class="keywordflow">throw</span> (std::logic_error)</div>
<div class="line">{</div>
<div class="line"><a class="code" href="classutil_1_1AttributeSet.html#a43e038c3e7ac88d6b6f83e5f62edc1ba">util::AttributeSet&lt;bool&gt;::Clear</a>();</div>
<div class="line"><a class="code" href="classutil_1_1AttributeSet.html#a43e038c3e7ac88d6b6f83e5f62edc1ba">util::AttributeSet&lt;int&gt;::Clear</a>();</div>
<div class="line"><a class="code" href="classutil_1_1AttributeSet.html#a43e038c3e7ac88d6b6f83e5f62edc1ba">util::AttributeSet&lt;double&gt;::Clear</a>();</div>
<div class="line"><a class="code" href="classutil_1_1AttributeSet.html#a43e038c3e7ac88d6b6f83e5f62edc1ba">util::AttributeSet&lt;std::string&gt;::Clear</a>();</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> using_it(){</div>
<div class="line">MultiAttributeSet mset(<span class="keyword">false</span>);</div>
<div class="line">mset.Insert(Attribute&lt;std::string&gt; (<span class="stringliteral">&quot;STR K 1&quot;</span>), <span class="stringliteral">&quot;String1&quot;</span>);</div>
<div class="line">mset.Insert(Attribute&lt;bool&gt; (<span class="stringliteral">&quot;BL K 1&quot;</span>), <span class="keyword">true</span>);</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;mset.get(STF K 1)=&quot;</span>&lt;&lt;mset.Contains(Attribute&lt;std::string&gt; (<span class="stringliteral">&quot;STR K 1&quot;</span>))&lt;&lt;std::endl;</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;mset.get(BL K 1)=&quot;</span>&lt;&lt;mset.Contains(Attribute&lt;bool&gt; (<span class="stringliteral">&quot;BL K 1&quot;</span>))&lt;&lt;std::endl;</div>
<div class="line">MultiAttributeSet mset_copy(mset);</div>
<div class="line"><span class="keyword">const</span> std::set&lt; Attribute&lt;std::string&gt; &gt; s = (( <a class="code" href="classutil_1_1AttributeSet.html">util::AttributeSet&lt;std::string&gt;</a>)mset_copy).Keys();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;string set keys :&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="keywordflow">for</span> (std::set&lt;Attribute&lt;std::string&gt; &gt;::iterator it = s.begin(); it != s.end(); ++it)</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;&gt;set key =&quot;</span> &lt;&lt; *it;</div>
<div class="line">mset_copy.Clear();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;is mset_copy empty ?=&quot;</span> &lt;&lt; mset_copy.Empty() &lt;&lt; <span class="stringliteral">&quot; s=&quot;</span> &lt;&lt; mset_copy.Size() &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;is mset empty ?=&quot;</span> &lt;&lt; mset.Empty() &lt;&lt; <span class="stringliteral">&quot; s=&quot;</span> &lt;&lt; mset.Size() &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p><br/>
 7- Create an abstract &amp; specialized Factory: an example of a factory who will create (when extended) a specific Player for a given Url (depends on Url protocol) <br/>
 </p>
<div class="fragment"><div class="line"> <span class="keyword">class </span>PlayerFactory: <span class="keyword">public</span> <a name="_a8"></a><a class="code" href="classutil_1_1Factory.html">util::Factory</a>&lt; Player, Url&gt; {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"></div>
<div class="line">       <span class="comment">// *\brief Creates a Player object for a given Url parameter.</span></div>
<div class="line">       <span class="comment">// * @param url that will act as the data source of the returned player.</span></div>
<div class="line">       <span class="comment">// * @return Player pointer if there is an appropriate player type for the url&quot;s protocol.</span></div>
<div class="line">       <span class="comment">// * @throw invalid_argument if no player could be created for this url.</span></div>
<div class="line"></div>
<div class="line">       <span class="keyword">virtual</span> Player* <a name="a9"></a><a class="code" href="classutil_1_1Factory.html#a43bab3b65bd3728035a046983e582eb5">Create</a>(<span class="keyword">const</span> Url &amp;url) <span class="keywordflow">throw</span> (std::invalid_argument)=0;</div>
<div class="line"></div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line"></div>
<div class="line">        <span class="comment">// \brief  Construct a new instance of PlayerFactory that should be registered to Factory (through Factory#Register()).</span></div>
<div class="line"></div>
<div class="line">       PlayerFactory();</div>
<div class="line">       <span class="keyword">virtual</span> ~PlayerFactory();</div>
<div class="line"></div>
<div class="line">       <span class="keywordtype">void</span> <a name="a10"></a><a class="code" href="classutil_1_1Factory.html#acbc37255471c41beb85837ae520195a6">_toCache</a>(<span class="keyword">const</span>  Url&amp; key, Player* player);</div>
<div class="line">       Player* <a name="a11"></a><a class="code" href="classutil_1_1Factory.html#a94ce49bc24b4ced5870040aa1b1cf91e">_fromCache</a>(<span class="keyword">const</span> Url&amp; key);</div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">       std::map&lt;std::string, Player*&gt; *mymap;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">}\n </div>
</div><!-- fragment --><div class="fragment"></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Oct 11 2015 21:14:46 for CppRT by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
